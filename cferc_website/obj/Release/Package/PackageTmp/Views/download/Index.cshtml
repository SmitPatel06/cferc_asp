@{
    ViewBag.Title = "Download Data";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


@section scripts{
    <script src="@Url.Content("~/Scripts/downloadData.js")"></script>
}

@section headSection{
    
    <link href="@Url.Content("~/Content/angular-busy.css")" rel="stylesheet"/>
    <link href="@Url.Content("~/Content/download.css")" rel="stylesheet" />
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.js"></script>
    <script src="@Url.Content("~/Scripts/angular-busy.js")"></script>
    
}


<div ng-app="app" ng-controller="download">
    <div cg-busy="myPromise"></div>
    <div class="row" id="topRow">
        <div class="col-md-2">
            <select class="form-control" ng-options="measure.measureName for measure in measureList" ng-model="selectedMeasure">
                <option value="" disabled selected>Select Measure</option>
            </select>
        </div>
        <div class="col-md-2">
            <select class="form-control" ng-options="industry.industryName for industry in industryList" ng-model="selectedIndustry">
                <option value="" disabled selected>Select Industry</option>
            </select>
        </div>
        <div class="col-md-2">
            <select multiple class="form-control" ng-options="area.areaName for area in areaList" ng-model="selectedArea">
                <option value="" disabled selected>Select Area</option>
            </select>
        </div>
        <div class="col-md-2">
            <select class="form-control" ng-options="year for year in output" ng-model="selectedBeginYear">
                <option value="" disabled selected>Begin Year</option>
            </select>
        </div>
        <div class="col-md-2">
            <select class="form-control" ng-options="year for year in output" ng-model="selectedEndYear">
                <option value="" disabled selected>End Year</option>
            </select>
        </div>
        <div class="col-md-2">
            <button class="btn-primary" id="queryBtn" ng-click="getData()">Query</button>
        </div> 

    </div>
    <div class="row">
        <div class="tableContainer">
            <table class="table" id="dataTable">
                <thead>
                    <tr>
                        <td>Area</td>
                        <td ng-repeat="val in data">{{val.year}}</td>
                        
                    </tr>
                    </thead>
                <tbody>
                    <tr ng-repeat="row in selectedArea">
                        <td>{{row.areaName}}</td>
                        <td ng-repeat="z in data">{{z.val}}</td>
                        
                    </tr>
                </tbody>

            </table>
        </div>
    </div>
    
    
    
    
    
</div>